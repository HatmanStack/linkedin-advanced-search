# ============================================
# SETUP INSTRUCTIONS
# ============================================
# 1. Copy this file to .env:
#    cp .env.example .env
#
# 2. Generate encryption keys:
#    cd puppeteer-backend
#    node scripts/generate-device-keypair.js
#    cd ..
#
# 3. Deploy AWS infrastructure:
#    cd RAG-CloudStack
#    sam build && sam deploy --guided
#
# 4. Auto-populate AWS values:
#    ./get-env-vars.sh <stack-name> --update-env
#    cd ..
#
# 5. Restart servers:
#    npm run dev (frontend)
#    cd puppeteer-backend && npm start (backend)
#
# ============================================

# Root environment configuration for frontend (Vite) and local backend
# - Only Vite variables (VITE_*) are exposed to the browser.
# - Do NOT put secrets behind VITE_.
# - The device crypto keys are generated by:
#   puppeteer-backend/scripts/generate-device-keypair.js
#   That script will append these if missing:
#     CRED_SEALBOX_PRIVATE_KEY_PATH=
#     VITE_CRED_SEALBOX_PUBLIC_KEY_B64=

########################################
# General
########################################
NODE_ENV=development
PORT=3001
# Comma-separated list of allowed frontend origins
FRONTEND_URLS=http://localhost:5173,http://localhost:3000

########################################
# Frontend (Vite)
########################################
# Local puppeteer backend URL (Express server)
VITE_PUPPETEER_BACKEND_URL=http://localhost:3001

# ============================================
# AWS DEPLOYMENT OUTPUTS
# ============================================
# After deploying with SAM, run:
#   cd RAG-CloudStack
#   ./get-env-vars.sh <stack-name> --update-env
# This will automatically populate these values

# API Gateway base URL (SAM Output: ApiUrl)
# Example: https://abc123.execute-api.us-west-2.amazonaws.com/prod
VITE_API_GATEWAY_URL=

# AWS Region
VITE_AWS_REGION=us-west-2

# Cognito User Pool configuration (SAM Outputs)
# UserPoolId format: us-west-2_abc123xyz
VITE_COGNITO_USER_POOL_ID=
# UserPoolClientId format: 1a2b3c4d5e6f7g8h9i
VITE_COGNITO_USER_POOL_WEB_CLIENT_ID=
# Identity Pool (optional, not used currently)
VITE_COGNITO_IDENTITY_POOL_ID=

# Frontend feature flags
VITE_MOCK_MODE=false

# Set by the key generator on first run:
VITE_CRED_SEALBOX_PUBLIC_KEY_B64=

# Puppeteer/browser defaults
HEADLESS=true
SLOW_MO=50
VIEWPORT_WIDTH=1200
VIEWPORT_HEIGHT=1200

# Timeouts (ms)
DEFAULT_TIMEOUT=30000
NAVIGATION_TIMEOUT=50000
LOGIN_SECURITY_TIMEOUT=0

# LinkedIn interaction settings
LINKEDIN_SESSION_TIMEOUT=3600000
SESSION_HEALTH_CHECK_INTERVAL=300000
MAX_SESSION_ERRORS=5
SESSION_RECOVERY_TIMEOUT=60000
MAX_CONCURRENT_INTERACTIONS=3
MAX_CONCURRENT_SESSIONS=1
INTERACTION_QUEUE_SIZE=50
RATE_LIMIT_WINDOW=60000
RATE_LIMIT_MAX=10
DAILY_INTERACTION_LIMIT=500
HOURLY_INTERACTION_LIMIT=100
INTERACTION_RETRY_ATTEMPTS=3
INTERACTION_RETRY_BASE_DELAY=1000
INTERACTION_RETRY_MAX_DELAY=300000
RETRY_JITTER_FACTOR=0.1
HUMAN_DELAY_MIN=1000
HUMAN_DELAY_MAX=3000
ACTIONS_PER_MINUTE=8
ACTIONS_PER_HOUR=100
TYPING_SPEED_MIN=80
TYPING_SPEED_MAX=150
TYPING_PAUSE_CHANCE=0.1
TYPING_PAUSE_MIN=500
TYPING_PAUSE_MAX=2000
MOUSE_MOVEMENT_STEPS=5
MOUSE_MOVEMENT_DELAY=100
SCROLL_STEP_SIZE=120
SCROLL_DELAY=200
SUSPICIOUS_ACTIVITY_THRESHOLD=3
SUSPICIOUS_ACTIVITY_WINDOW=300000
COOLDOWN_MIN_DURATION=30000
COOLDOWN_MAX_DURATION=300000
LINKEDIN_NAVIGATION_TIMEOUT=30000
ELEMENT_WAIT_TIMEOUT=10000
MESSAGE_COMPOSE_TIMEOUT=15000
POST_CREATION_TIMEOUT=20000
CONNECTION_REQUEST_TIMEOUT=15000
MAX_MESSAGE_LENGTH=8000
MAX_POST_LENGTH=3000
MAX_CONNECTION_MESSAGE_LENGTH=300
BROWSER_LAUNCH_TIMEOUT=30000
PAGE_LOAD_TIMEOUT=30000
BROWSER_IDLE_TIMEOUT=1800000
MAX_CONSECUTIVE_ERRORS=5
ERROR_COOLDOWN_DURATION=60000
PERFORMANCE_LOGGING_ENABLED=false
AUDIT_LOGGING_ENABLED=true
METRICS_COLLECTION_INTERVAL=60000
ENABLE_MESSAGE_SENDING=true
ENABLE_CONNECTION_REQUESTS=true
ENABLE_POST_CREATION=true
ENABLE_HUMAN_BEHAVIOR=true
ENABLE_SUSPICIOUS_ACTIVITY_DETECTION=true
LINKEDIN_DEBUG_MODE=false
SCREENSHOT_ON_ERROR=false
SAVE_PAGE_SOURCE_ON_ERROR=false
VERBOSE_LOGGING=false

# Backend paths
APP_NAME=linkedin-advanced-search
SCREENSHOTS_DIR=./screenshots
LINKS_FILE=./data/possible-links.json
GOOD_CONNECTIONS_FILE=./data/good-connections-links.json

# Puppeteer Backend Activity Thresholds For Identifying Active Connections
RECENCY_HOURS=6
RECENCY_DAYS=5
RECENCY_WEEKS=3
HISTORY_TO_CHECK=4
THRESHOLD=8
PAGE_NUMBER_START=17
PAGE_NUMBER_END=17

# ============================================
# BACKEND AWS CONFIGURATION
# ============================================
# These are automatically populated by get-env-vars.sh --update-env

# API Gateway base URL (same as VITE_API_GATEWAY_URL)
API_GATEWAY_BASE_URL=

# AWS Region (same as VITE_AWS_REGION)
AWS_REGION=us-west-2

# S3 bucket for screenshots (SAM Output: ScreenshotBucketName)
# Format: <stack-name>-screenshots-<account-id>
S3_SCREENSHOT_BUCKET_NAME=

# CloudFront domain (if using CloudFront CDN)
CLOUDFRONT_DOMAIN=

# DynamoDB table name (SAM Output: DynamoDBTableName)
# Format: <stack-name>-profiles
DYNAMODB_TABLE=

# S3 Profile Text Storage (Phase 3)
# If not set, falls back to S3_SCREENSHOT_BUCKET_NAME
S3_PROFILE_TEXT_BUCKET_NAME=
# Prefix for profile text files in S3 (default: linkedin-profiles/)
S3_PROFILE_TEXT_PREFIX=linkedin-profiles/
# Region for profile text bucket (default: same as AWS_REGION)
S3_PROFILE_TEXT_REGION=us-west-2


# Set by the key generator on first run:
CRED_SEALBOX_PRIVATE_KEY_PATH=

########################################
# Lambda / Deployment (reference only, not used by local runtime)
########################################
# OPENAI_API_KEY=
# DYNAMODB_TABLE=
